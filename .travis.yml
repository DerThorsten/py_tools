language: generic
dist: precise
env:
matrix:
  fast_finish: true
  include:
    - os: linux
    - os: osx
env:
  global:
    - MINCONDA_VERSION="latest"
    - MINCONDA_LINUX="Linux-x86_64"
    - MINCONDA_OSX="MacOSX-x86_64"

install:
    # Define the version of miniconda to download
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
        MINCONDA_OS=$MINCONDA_LINUX;
      elif [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
        MINCONDA_OS=$MINCONDA_OSX;
      fi
    - wget "http://repo.continuum.io/miniconda/Miniconda3-$MINCONDA_VERSION-$MINCONDA_OS.sh" -O miniconda.sh;
    - bash miniconda.sh -b -p $HOME/miniconda
    - export PATH="$HOME/miniconda/bin:$PATH"
    - hash -r
    - conda config --set always_yes yes --set changeps1 no
    - conda update -q conda

script:
- chmod +x .ci/test_project.sh
- ./.ci/test_project.sh


# Assuming you have installed the travis-ci CLI tool, after you
# create the Github repo and add it to Travis, run the
# following command to finish PyPI deployment setup:
# $ travis encrypt --add deploy.password
# to install the travis cmd tool try
# $ gem install travis
# (https://docs.travis-ci.com/user/encryption-keys/)
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: DerThorsten
  password:
    secure: icZd6dORLmdW8lpjwsMJRghtatiZ9Vbaa/t4lhdXfCUnGqlYVlLXHs+bKWP2w8br1v8aW3PTMJh1kpnXPSoocJPYcLXjtic2fS1HjXcbf/2W+9LnT1TQcRB9jSM7lBOuf0JVBdO3Kw0DG+5q9Ks4D5wLhfmze3DLNbp+NJfJP6+yENlFdTI9R6T7V9xsaLcW5G1lak/pVYjDgcBzq7B5m51AcTXrqN7qO2ZKpBfC3ZzjEDxCSGCAF4vbvDWo5HXK25xSKvQg3W9GUuNLH8+WB9Geih/bj3RYPU6bBgo416cIiRagpn9LKUcoa2hK9XNbdG+Omp1kePPQWPmH9RIgnF5ypbcmninkniPKjmaJQNT9M2z0+GyxUxFbOjkGzddM1RceUfOk32Xux1RbYqQk1yAQC6gY2+3MZUnOUZL0i1l5jjPShEYtKHvRZNj6cTNhSzD4yEpXc/r2nqWR+FBhXGEZF2Mr3U3qTMbayiuDjvMezspFpdDgMp/lwPXER23PGc0rGTLoeE8sIK2CgIhUg0Qy7WkklW1S6U1Wb/4cF4e/KY86mVxMUmfpZKBCuAP407Y754pDqOOnSQhKn62d4wuKuewiPQk3Hl4HqTsdLY9bMtxKoqxxIB0wCtYCBM0u4EHhgnWL+M7zMAP9QNC3RYKB2ENE6b3qB27w/bqScD8=
  on:
    tags: true
    repo: DerThorsten/py_tools